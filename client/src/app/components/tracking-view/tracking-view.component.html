<div class="container" @fadeIn>
  <h2>Medication Tracking Overview</h2>
  <mat-card @fadeIn>
    <table mat-table [dataSource]="trackings">
      <ng-container matColumnDef="patient">
        <th mat-header-cell *matHeaderCellDef>Patient</th>
        <td mat-cell *matCellDef="let t">{{ t.Medication?.Patient?.name || 'N/A' }}</td>
      </ng-container>
      <ng-container matColumnDef="medication">
        <th mat-header-cell *matHeaderCellDef>Medication</th>
        <td mat-cell *matCellDef="let t">{{ t.Medication?.name || 'N/A' }}</td>
      </ng-container>
      <ng-container matColumnDef="dosage">
        <th mat-header-cell *matHeaderCellDef>Dosage</th>
        <td mat-cell *matCellDef="let t">{{ t.Medication?.dosage || 'N/A' }}</td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let t">
          <span class="status-badge" [class.given]="t.status === 'given'" [class.missed]="t.status === 'missed'" [class.pending]="t.status === 'pending'">
            {{ t.status | titlecase }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="trackedBy">
        <th mat-header-cell *matHeaderCellDef>Tracked By</th>
        <td mat-cell *matCellDef="let t">{{ t.tracker?.username || 'N/A' }}</td>
      </ng-container>
      <ng-container matColumnDef="trackedAt">
        <th mat-header-cell *matHeaderCellDef>Tracked At</th>
        <td mat-cell *matCellDef="let t">{{ t.trackedAt | date: 'short' }}</td>
      </ng-container>
      <ng-container matColumnDef="notes">
        <th mat-header-cell *matHeaderCellDef>Notes</th>
        <td mat-cell *matCellDef="let t">{{ t.notes || '-' }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <p *ngIf="trackings.length === 0" style="padding: 24px; text-align: center; color: #666;">
      No tracking information available.
    </p>
  </mat-card>
</div>
